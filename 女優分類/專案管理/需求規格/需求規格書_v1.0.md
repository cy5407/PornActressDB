# 女優分類系統 - 需求規格書 v1.0

## 📋 專案資訊
- **專案名稱**: 女優分類系統
- **版本**: v5.1
- **建立日期**: 2025年6月17日
- **最後更新**: 2025年6月17日
- **負責人**: [請填入負責人姓名]

## 🎯 專案目標

### 主要目標
1. **自動化分類**: 實現影片檔案的自動分類與整理
2. **智慧識別**: 透過檔名提取影片編號並搜尋相關資訊
3. **個人化管理**: 支援使用者偏好設定與記憶功能
4. **片商整理**: 按片商歸類女優資料夾的進階功能

### 次要目標
1. 提供直觀的圖形化操作介面
2. 支援大量檔案的批次處理
3. 建立完整的影片與女優資料庫
4. 提供詳細的處理進度與結果報告

## 👥 目標使用者

### 主要使用者
- **個人收藏管理者**: 需要整理大量影片檔案的使用者
- **資料庫管理員**: 負責維護影片資料庫的使用者

### 使用者特徵
- 具備基本電腦操作能力
- 熟悉檔案管理概念
- 需要高效率的檔案整理工具

## 🔧 功能需求

### FR-001: 檔案掃描與識別
**優先級**: 高
**描述**: 系統應能夠掃描指定資料夾中的影片檔案，並從檔名中提取影片編號

**功能細節**:
- 支援多種影片格式 (mp4, avi, mkv, wmv, mov等)
- 智慧識別檔名中的影片編號
- 支援遞迴掃描子資料夾選項
- 顯示掃描進度與結果統計

**驗收標準**:
- [ ] 能正確識別90%以上的常見影片編號格式
- [ ] 掃描1000個檔案的時間不超過30秒
- [ ] 提供即時的掃描進度顯示

### FR-002: 網路資訊搜尋 ⭐ (v5.1 強化)
**優先級**: 高
**描述**: 系統應能夠根據影片編號搜尋相關的女優資訊，並同步獲取片商資訊

**功能細節**:
- 支援多個搜尋來源
- 自動去重複與合併搜尋結果
- 建立本地資料庫快取搜尋結果
- 處理搜尋失敗與異常情況
- **新增**: 同步搜尋並儲存片商資訊（片商名稱、片商代碼、發行日期）
- **新增**: 整合 studios.json 進行片商代碼映射
- **新增**: 多種片商資訊提取模式（網頁解析、番號推測、映射查找）

**驗收標準**:
- [x] 搜尋成功率達到85%以上
- [x] 單次搜尋時間不超過10秒
- [x] 能正確處理網路連線異常
- [x] **新增**: 片商資訊提取準確率達到80%以上
- [x] **新增**: 資料庫自動擴充支援片商欄位
- [x] **新增**: 搜尋結果包含完整的女優與片商關聯資訊

### FR-003: 互動式分類
**優先級**: 高
**描述**: 當影片涉及多位女優時，系統應提供選擇介面讓使用者決定分類方式

**功能細節**:
- 彈出對話框顯示所有參演女優
- 支援使用者選擇偏好的女優進行分類
- 記住使用者的選擇偏好
- 提供跳過或批次處理選項

**驗收標準**:
- [ ] 對話框在3秒內顯示
- [ ] 能正確記住100%的使用者選擇
- [ ] 支援鍵盤快速操作

### FR-004: 標準分類
**優先級**: 中
**描述**: 提供快速的自動分類功能，使用第一位女優進行分類

**功能細節**:
- 自動使用第一位女優建立分類
- 批次處理多個檔案
- 顯示處理進度與結果
- 處理檔案名稱衝突

**驗收標準**:
- [ ] 處理1000個檔案時間不超過5分鐘
- [ ] 正確處理100%的檔名衝突情況
- [ ] 提供詳細的處理報告

### FR-005: 片商分類
**優先級**: 中
**描述**: 根據女優的片商分佈統計，將女優資料夾歸類到對應的片商資料夾

**功能細節**:
- 分析女優的片商分佈統計
- 依據信心度門檻進行自動分類
- 支援自訂分類規則與門檻設定
- 提供分類預覽與確認機制

**驗收標準**:
- [ ] 信心度計算準確率達95%以上
- [ ] 支援自訂60%-90%的信心度門檻
- [ ] 提供完整的分類統計報告

### FR-006: 偏好設定管理
**優先級**: 低
**描述**: 提供完整的使用者偏好設定功能

**功能細節**:
- 最愛女優與優先女優清單管理
- 共演記錄與偏好記憶
- 檔案命名規則設定
- 片商分類規則設定

**驗收標準**:
- [ ] 設定變更即時生效
- [ ] 支援設定的匯出與匯入
- [ ] 提供設定重置功能

## 🏗️ 非功能需求

### NFR-001: 效能需求
- **回應時間**: GUI操作回應時間 < 1秒
- **處理能力**: 支援同時處理10,000個以上檔案
- **記憶體使用**: 正常運作時記憶體使用 < 500MB

### NFR-002: 可用性需求
- **易用性**: 新使用者能在10分鐘內學會基本操作
- **錯誤處理**: 提供清楚的錯誤訊息與解決建議
- **使用者介面**: 支援中文顯示，介面清晰直觀

### NFR-003: 相容性需求
- **作業系統**: 支援 Windows 10/11, macOS 10.15+, Ubuntu 18.04+
- **Python版本**: 支援 Python 3.7 以上版本
- **檔案系統**: 支援 NTFS, APFS, ext4 檔案系統

### NFR-004: 可靠性需求
- **穩定性**: 連續運作24小時不出現記憶體洩漏
- **資料完整性**: 檔案移動操作的成功率 > 99.9%
- **錯誤復原**: 支援操作中斷後的狀態恢復

## 🚫 限制與約束

### 技術限制
- 依賴網路連線進行資訊搜尋
- 檔案移動操作不可復原
- 影片編號識別準確度受檔名格式影響

### 業務限制
- 僅支援合法內容的管理
- 不提供內容下載功能
- 遵守相關法律法規

### 環境限制
- 需要穩定的網路連線
- 需要足夠的磁碟空間
- 需要適當的系統權限

## 📝 驗收條件

### 基本驗收條件
1. ✅ 所有高優先級功能正常運作
2. ✅ 通過基本的使用者接受度測試
3. ✅ 完成效能需求驗證
4. ✅ 提供完整的使用者文件

### 進階驗收條件
1. ⏳ 所有中優先級功能正常運作
2. ⏳ 通過壓力測試與穩定性測試
3. ⏳ 完成多平台相容性測試
4. ⏳ 建立完整的技術文件

## 📊 風險評估

### 高風險項目
1. **網路搜尋穩定性**: 外部網站變更可能影響搜尋功能
2. **檔案操作安全性**: 檔案移動錯誤可能造成資料遺失

### 中風險項目
1. **效能瓶頸**: 大量檔案處理可能造成系統卡頓
2. **編號識別準確度**: 特殊格式的檔名可能無法正確識別

### 風險緩解策略
1. 建立多重搜尋來源備援機制
2. 實施檔案操作前的安全檢查
3. 採用漸進式處理避免系統過載
4. 提供手動修正功能

---

**文件版本**: v1.0  
**建立日期**: 2025年6月17日  
**下次審查**: 2025年7月17日
